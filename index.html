<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title -->
    <title>Hello Muse!</title>
    <!-- JS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      const backgroundImages = [
        "assets/bg/background_1.jpg",
        "assets/bg/background_2.jpg",
        "assets/bg/background_3.jpg",
        "assets/bg/background_4.jpg"
      ];
      const chosenBackground =
        backgroundImages[Math.floor(Math.random() * backgroundImages.length)];
    
      document.addEventListener("DOMContentLoaded", () => {
        document.body.style.backgroundImage = `url('${chosenBackground}')`;
        document.body.style.backgroundSize = "cover";
        document.body.style.backgroundPosition = "center";
        document.body.style.backgroundRepeat = "no-repeat";
      });
    </script>    
  </head>

  <body>    
    <div class="min-h-[100dvh] flex items-center justify-center p-4">
      <div class="bg-white bg-opacity-90 shadow-2xl rounded-2xl p-6 w-[95vw] max-w-[800px] space-y-8 backdrop-blur-md">
        <div>
          <p class="text-3xl sm:text-4xl text-gray-800 mb-4 text-center font-bold">
            Please find 'M'
          </p>
          <div id="image-grid" class="grid grid-cols-3 gap-4"></div>
        </div>
    
        <style>
          /* Hide default checkbox */
          input[type="checkbox"] {
              appearance: none;
              width: 24px;
              height: 24px;
              border: 2px solid #ccc;
              border-radius: 4px;
              cursor: pointer;
              position: relative;
              display: inline-block;
          }
      
          /* Change style when checked */
          input[type="checkbox"]:checked {
              background-color: #f89db5;
              border-color: #f89db5;
          }
      
          /* Create a heart icon when checked */
          input[type="checkbox"]:checked::before {
              content: "â™¡"; /* Heart emoji */
              font-size: 18px;
              position: center;
          }
      </style>
      
      <div class="flex items-center space-x-3 text-base">
          <input type="checkbox" id="not-robot" class="w-6 h-6" />
          <label for="not-robot" class="text-xl sm:text-2xl text-gray-700 italic font-medium">
              Hello Muse! From Friends.
          </label>
      </div>
      
      
    
        <button id="submit-btn" style="background-color: #f89db5;" class="w-full py-7 text-3xl font-bold text-white rounded-xl transition">
          Send Love
      </button>
      
    
        <div
          id="popup" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50" >
          <div class="bg-white p-8 rounded-2xl shadow-xl text-center space-y-6 max-w-xl w-[95vw]" >
            <h2 class="text-4xl font-extrabold text-black-700">Hello Everyone!</h2>
            <img
              src="assets\reward\Reward_1.jpg"
              alt="Reward"
              id="reward-img"
              class="rounded-xl mx-auto w-full max-w-[480px]"
            />
            <button id="close-popup" class="mt-4 px-6 py-3 bg-gray-700 text-white text-lg rounded hover:bg-gray-800" >
              Bye!
            </button>
          </div>
        </div>
    
        <div id="fail-popup"  class="fixed inset-0 hidden flex items-center justify-center z-50" >
          <div class="bg-white p-8 rounded-2xl shadow-xl text-center space-y-6 max-w-xl w-[95vw]" >
            <h2 class="text-3xl font-bold text-Black-400"></h2>
            <p class="text-3xl text-gray-1100">Find 'M' again!</p>
            <br />
            <button id="close-fail" class="mt-4 px-6 py-3 bg-gray-700 text-white text-lg rounded hover:bg-gray-800" >
              Retry
            </button>
          </div>
        </div>
    
        <!-- Copyright -->
        <div class="text-sm text-gray-500 text-center pt-4">
          &copy; 2025 Muse. All rights reserved.
          <br />
        </div>
      </div>
    </div>
    
    <style>
      .grid-tile.selected {
        outline: 4px solid #f89db5;
      }
    </style>
    
    <script>
      const correctPool = [
        "assets/correct/Correct_1.jpg",
        "assets/correct/Correct_2.jpg",
        "assets/correct/Correct_3.jpg",
        "assets/correct/Correct_4.jpg",
        "assets/correct/Correct_5.jpg",
        "assets/correct/Correct_6.jpg",
        "assets/correct/Correct_7.jpg",
        "assets/correct/Correct_8.jpg",
        "assets/correct/Correct_9.jpg",
        "assets/correct/Correct_10.jpg",
        "assets/correct/Correct_11.jpg",
        "assets/correct/Correct_12.jpg",
        "assets/correct/Correct_13.jpg",
        "assets/correct/Correct_14.jpg"
      ];

      const wrongPool = [
    "assets/wrong/Wrong_1.jpg",
    "assets/wrong/Wrong_2.jpg",
    "assets/wrong/Wrong_3.jpg",
    "assets/wrong/Wrong_4.jpg",
    "assets/wrong/Wrong_5.jpg",
    "assets/wrong/Wrong_6.jpg",
    "assets/wrong/Wrong_7.jpg",
    "assets/wrong/Wrong_8.jpg",
    "assets/wrong/Wrong_9.jpg",
    "assets/wrong/Wrong_10.jpg",
    "assets/wrong/Wrong_11.jpg",
    "assets/wrong/Wrong_12.jpg",
    "assets/wrong/Wrong_13.jpg",
    "assets/wrong/Wrong_14.jpg",
    "assets/wrong/Wrong_15.jpg",
    "assets/wrong/Wrong_16.jpg",
    "assets/wrong/Wrong_17.jpg",
    "assets/wrong/Wrong_18.jpg",
];
const getRandomImage = () => wrongPool[Math.floor(Math.random() * wrongPool.length)];

console.log(getRandomImage());

    
      const rewardImages = [
        "assets/reward/Reward_1.jpg",
        "assets/reward/Reward_2.jpg",
        "assets/reward/Reward_3.jpg",
        "assets/reward/Reward_4.jpg",
        "assets/reward/Reward_5.jpg",
        "assets/reward/Reward_6.jpg",
        "assets/reward/Reward_7.jpg",
        "assets/reward/Reward_8.jpg",
        "assets/reward/Reward_9.jpg",
        "assets/reward/Reward_10.jpg"
      ];

      const gridContainer = document.getElementById("image-grid");
      const popup = document.getElementById("popup");
      const failPopup = document.getElementById("fail-popup");
      const closeBtn = document.getElementById("close-popup");
      const closeFailBtn = document.getElementById("close-fail");
      const submitBtn = document.getElementById("submit-btn");
      const rewardImageElement = document.getElementById("reward-img");
      let currentCorrect = [];
    
      function shuffle(array) {
        return [...array].sort(() => Math.random() - 0.5);
      }
    
      function renderGrid() {
        currentCorrect = shuffle(correctPool).slice(0, 3);
        const randomWrong = shuffle(wrongPool).slice(0, 6);
        const images = shuffle([...currentCorrect, ...randomWrong]);
    
        gridContainer.innerHTML = "";
        images.forEach((src) => {
          const img = document.createElement("img");
          img.src = src;
          img.setAttribute("data-file", src);
          img.className =
            "grid-tile aspect-square cursor-pointer rounded-md object-cover w-full";
          img.addEventListener("click", () => {
            img.classList.toggle("selected");
          });
          gridContainer.appendChild(img);
        });
      }
    
      submitBtn.addEventListener("click", () => {
        const selected = Array.from(
          document.querySelectorAll(".grid-tile.selected")
        );
        const selectedFiles = selected.map((img) => img.getAttribute("data-file"));
        const isCorrect =
          selectedFiles.length === 3 &&
          currentCorrect.every((file) => selectedFiles.includes(file));
    
        if (isCorrect) {
          const randomReward =
            rewardImages[Math.floor(Math.random() * rewardImages.length)];
          rewardImageElement.src = randomReward;
          popup.classList.remove("hidden");
        } else {
          failPopup.classList.remove("hidden");
        }
      });
    
      closeBtn.addEventListener("click", () => {
        popup.classList.add("hidden");
        renderGrid();
      });
    
      closeFailBtn.addEventListener("click", () => {
        failPopup.classList.add("hidden");
        renderGrid();
      });
    
      renderGrid();
    </script>
    
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-KS4B26KGFG"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
    
      gtag("config", "G-KS4B26KGFG");
    </script>  
  </body>
</html>
